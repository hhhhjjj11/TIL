# 3월 14일

## 가상환경에서 장고 프로젝트 서버 시작하기

</br>

#### 가상환경이란?

- 프로젝트를 여러개 돌릴때에 매번 서버닫고 열고 해줘야함 (하나의 환경에서 하나의 서버만 돌릴 수 있음)
- 개귀찮음 -> 가상환경 만들어주면 여러서버 동시에 돌릴수있음.

- 어떤 폴더에다가 가상환경을 만들어주면, 이 폴더의 하위에서는 모두 새로운 환경이 되는거임.

</br>

### 1. 우선 가상환경을 만들고

### 2. 그 안에 장고 깔고

### 3. 프로젝트 시작하고

### 4. 앱만들고

### 5. 런서버

</br>
</br>

## 1. 가상환경 만드는 법

</br>

1. 가상환경을 실행하고자 하는 폴더(프로젝트 폴더)로 간다.

2. ```
   $ python -m venv venv(작명)
   ```
3. ```
   $ source ./venv/Scripts/activate
   ```
   - 그러면 콘솔에 (venv) 뜸.
   - 그러면 현재 환경이 가상환경이라는 뜻.
   - pip list 해보면 아무것도 없음. 새로운 환경임
   - 다시 전부 설치해주고 프로젝트 해주면 됨.

- 참고 : 탭써서 자동완성 하기
  - sc + tab -> scripts
  - sc로 시작하는게 scripts 하나뿐이므로 바로 뜸
  - activate의 경우는 ac로 시작하는게 여러개 있음.
  - 탭 두번 누르면 ac로 시작하는거 목록 볼 수 있음.

4. 가상환경 끄고싶을때는
   ```
   $ deactivate
   ```

- 참고: 어떤 가상환경도 아닌 곳은 global환경임 (default)
- 항상 글로벌이 아닌 프로젝트 폴더 안의 가상환경을 만들고 거기에서 작업하는 습관을 갖자. 글로벌 말구.

</br>

5. 참고 : 협업할때 패키지목록을 공유하는 방법

- 패키지를 깃에 공유하면 깃이 너무 무거워짐 -> 안좋음. 오류나면 해결이 매우 어려움
- 그래서 패키지는 협업할때도 깃으로 공유 안함.
- 이때 내가 쓴 패키지를 협업자도 설치할 수 있도록 사용한 패키지 목록을 뽑아주는 기능이 있음.

1. 가상환경 패키지 목록 저장하기

   ```
   $ pip freeze > requirements.txt
   ```

   - 가상환경에서 설치한 패키지리스트가 담긴 requirements.txt 파일이 만들어짐
   - 이때! 터미널상 현재위치에 requirements.txt파일 만들어짐!
   - 따라서 venv폴더에서 하는게 좋을듯?

   </br>

2. 파일로부터 패키지 한번에 설치하기(버전까지맞춰서 설치해줌)

   ```
   $ pip install -r requirements.txt
   ```

3. 참고 깃허브쓸때
   하위에 가상환경 만들었을때는
   -> 반드시 .gitignore에 venv_test/추가 해야됨.그리고커밋해야함.
   (그래야 패키지들 까지 다 안올라가는듯?)

- 그리고 requirements.txt 를 활용해서 패키지는 따로 관리
- 깃허브가 무거우면 충돌날때 관리가 매우 힘듬.

</br></br>

## 2. 장고 설치하기

1. ```
   $ pip install django==3.2.18
   ```

</br></br>

## 3. 프로젝트 시작하기

1. 방법1

   ```
   $ django-admin startproject first_pjt(작명)
   ```

   -> 하위에 first_pjt 폴더(프로젝트폴더)가 만들어짐

2. 방법2
   ```
   $ django-admin startproject secondpjt .
   ```
   -> 하면 하위로 안생기고 같은 경로에 생김 (해보기)

</br></br>

3.  참고. 프로젝트 폴더에 들어있는 파일들 살펴보기

    1.  **init**.py -> 현재 폴더를 파이썬 패키지로 인식. 얘가 없으면 인식을 못해. 뭔오류생기면 얘 있는지 확인할것.
    2.  asgi.py -> 비동기 과정을 도와줌. 나중에 배포할때 필요(우리과정에서 안씀)
    3.  settings.py (매우중요) -> 장고프로젝트의 설정을 관리
        - settings.py안에 변수 BASE_DIR은 프로젝트 폴더를 가리키게 되어있음.
        - INSTALLED APPS : 현재 프로젝트의 앱의 종류임.
    4.  urls.py -> url과 적절한 views연결 (url리스트를 적어놓는 곳인듯)

        - urlpatterns [ path('admin/', admin.site.urls), ]

        -> admin경로로 요청 들어올때 뒤의로직 실행 된다~

    5.  wsgi.py -> 서버와 연결 도와주는 역할(그런가보다)
    6.  manage.py -> 장고프로젝트와 소통하는 유틸리티(?) (건드는거아님)

            -> 장고 프로젝트와 사용자 사이의 인터페이스 "DB에 ~를 반영해라"명령을 프로젝트에 내리고 싶다.

        python manage.py ~~~~

    프로젝트할때는 settings.py 랑 urls.py 두개만 보면 됨.

</br></br>

## 4. 앱만들기

1. 프로젝트폴더에서
   ```
   $ python manage.py startapp articles(앱이름)
   ```
   - 일반적으로 애플리케이션 이름은 복수형으로 짓는것이 관례
   - 앱 == 하나의 큰 기능 단위 (어떤기준? 개발자가정하는거)
   - 여러개의 앱이 아닌 단일 앱으로 개발해도 괜찮음
     (일반적으로는 기능단위로 쪼갬)

</br>

2. 앱을 만들때에는 반드시! "애플리케이션 등록"을 해주어야함
   - (안그러면 오류남)
   - 애플리케이션 등하는 방법
   - -> 프로젝트 폴더의 settings.py에
   - -> INSTALLED_APPS 리스트에 앱이름을 추가해준다!

</br></br>

3. 참고. 앱구조 살펴보기(앱폴더에 들어있는 파일들 살펴보기)
   1. admin -> 관리자용 페이지 관리 (장고만의 장점)
   2. apps.py -> 앱의 정보가 작성된 곳, 건드는거 아님.
   3. models.py (중요) -> 어플리케이션에서 사용하는 Model(Data의 구조)을 정의하는 곳
   4. test.py -> 테스트 코드를 작성하는 곳. 원래 중요한데, 지금 우리한테는 필요 없음. 나중에 장고 다 배우고 좀 칠때 들여다 보면 됩니다.
   5. views.py -> view 함수들이 정의 되는 곳

</br></br>

## 5. 런서버 (프로젝트 폴더에서 manage.py)

1. ```
   $ python manage.py runserver
   ```

   -> 그러면 콘솔에 어느 주소에서 서버 실행됏다고 알려줌

   -> 그거 누르면됨

</br></br>

## 프로젝트와 앱

하나의 프로젝트 안의 기능단위의 여러 앱.

</br>

</br>
</br>
