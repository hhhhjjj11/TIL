# 1. db작성
1. 설정 뭐 좀 하고..
2. create schema if not exists
3. drop table if exists
4. create table if not exists
5. (test) insert into 

## 테이블 네개만듬 : 게시글(board), 유저(member), 파일(fileInfo), 댓글(memo)

## board
1. article_no
2. user_id
3. subject
4. content
5. hit
6. register_time

### [중요] 주요키 등록하기  간단함.
- PRIMARY KEY(`article_no`)

### [중요] 외래키등록하기
- 키워드 : CONSTRAINT / FOREIGN KEY / REFERENCES
  CONSTRAINT `board_to_members_user_id_fk`
    FOREIGN KEY (`user_id`)
    REFERENCES `ssafyweb`.`members` (`user_id`)

### [중요] 인덱스 생성하기 (쿼리검색시 성능향상을 위함인듯)
-   INDEX `board_to_members_user_id_fk` (`user_id` ASC) VISIBLE,
- `board_to_member_user_id_fk`라는 이름의 인덱스를 생성, 기준은 `user_id`, 오름차순으로.
- VISIBEL : 사용자한테 보이게 설정.(?) 이렇게 하면 쿼리에서 이 인덱스를 필드처럼 사용할 수 있다는 듯 ??


### 주의 : 필드는 백틱,  insert into 할때는 따옴표 써야됨.

<br><br>

# 2. Dto 작성.

- 패키지구성 : com.ssafy.board.model
- 클래스이름 : BoardDto / FileInfoDto

- 패키지 구성 : com.ssafy.member.model
- 클래스이름 : MemberDto

### db에서 작성한 필드중에서 dto에 안쓰는 필드가 있다. 근데 걍 dto에 전부 작성하는게 낫지 않나 싶기도 함. 어차피 안쓰면 되니까.


# 3. Mapper(Dao) 작성 
- 패키지 구성 : com.ssafy.board.model.mapper / com.ssafy.member.model.mapper
- 클래스 이름 : BoardMapper / MemberMapper


# 4. Servcie/ ServiceImpl 작성
- 패키지구성  : com.ssafy.board.model.service
- 클래스이름 :  BoardService / BoardServiceImpl

## Service
- 기본적으로 Mapper랑 메서드 이름 같은데
- Mapper는 db들어야하는 애들 다 써논거고. Service는 사용자입장에서 사용하는 메서드를 써놓은거임
- 하고 싶은 말 : Mapper에서 정한 메서드들은 서비스에서 안쓰고, 서비스으 ㅣ어떤 메서드 안에서 사용하기 위해 만든 메서드ㄷ ㅗ있다 이말임 
- 그래서 Service에서 쓰는게아니라, ServiceImpl에 가서 메서드 안에서 다시 쓸거임.

## ServiceImpl
1. Mapper 인스턴스를 이용해서 메서드 사용할거임.
2. 선언한다음에 생성자 이용해서 의존성 주입한다.
3. 메서드 오버라이딩 한다. ServiceImpl에서 이제 다 로직 작성 해주면 되는듯.

[참고] 글작성 로직 흐름을보면.. controller에서도 뭐가 길고 serviceImpl에서도 뭐가 잔뜩 써있다.
왜 어떤 로직은 컨트롤러에서 처리하고 어떤부분은 service에서 처리하는가.
- 기본적으로 비즈니스로직은 serviceimpl에서 처리한다
- 컨트롤러에 작성된 코드를 살펴보면 입력받은 file정보를 서비스메서드에 잘 입력하도록 다시정돈하는 로직임..
- 요청을 받아서 서비스메서드에 넣을 형태로 다시 포장하는거는 컨트롤러에서 해준다. 정도로 알고있으면 될드.

### 1. writeArticle
- 기본적으로, 파일저장이랑 게시글저장을 따로함을 알자. (각각 다른 테이블을 만들었었다.)
- 또한, 파일정보만을 db에저장하고, 파일정보에 파일저장경로를 만듦으로써 관리한다. (실제 파일은 지정한 resource폴더에 저장이된다.) 
- db에저장되는것은 파일의 경로등을 담은 파일정보이다.
1. 글은 바로 저장 때림. boardMapper.writeArticle(baordDto)
2. boardDto로부터 getFileInfos 해서 정보가 비어있지않으면 boardMapper.registerFile(boardDto)

### 2. listArticle [전체조회]
- 기본적으로, 단순히 전부다 불러오는것이 아니라 검색기능 + 페이지네이션 기능까지 합쳐저서 조금 복잡
- 일단 해당 페이지번호랑 검색 key와 word를 요청으로부터 전달받음을 알자.
- 그래서 Mapper에 인자로 넣기위해서 새로운 param을 다시 만들어야 한다.
- 매퍼의 인자에 필요한 정보(쿼리날리는데 필요한정보) : key / word / start / listsize 
- 요청으로 들어오는 정보 : key / word / pgNo

1. 매퍼에인자로 넣을 param을 재구성해야하니까 하나 선언하자. param
2. 우선, 전달받은 map으로부터 key를 얻어서, 이게 사용자기준 검색인지 제목기준 검색인지를 판단할건데, 
만약에 사용자기준 검색이다? 그러면 추가작업이 필요한게 sql문에서 테이블 구분해서쓸거라서 "user_id" 가 아니라 "b.user_id" 로 바꿔줘야한다.
3. 그리고 null이면 ""를 넣고 아니면 그대로 넣어준다 param에
3. 마찬가지로, 전달받은 map으로부터 word를 얻어서, null이면 1을넣고 아니면 그대로 넣어줌.
4. key랑 word는  null인지 아닌지만 걸러서 그대로 매퍼에 전달하는 반면, pgNo는 이거 가지고 start를 만들거라서 일단 변수에 담느다.
5. start랑 listsize를 param에 넣는다.
5. 매퍼호출해서 넘긴다.

### 3. deleteArticle 
- 세 번지워야 됨.
- 파일정보 지우고 (db)
- 글데이터 지우고 (db)
- 리소스 경로에 저장된 파일 지우고.


## Util작성


# 5. Controller 
- 패키지구성 : com.ssafy.board.controller
- 클래스 이름 : BoardController