# 3월 14일

### 장고 설치하고 서버만들어보기

1. pip install django==3.2.18

2. django-admin startproject first_pjt(프로젝트이름)
-> first_pjt 폴더가 만들어짐

3. cd first_pjt 한다음 manage.py 런서버 해주기
python manage.py runserver
-> 그러면 콘솔에 어느 주소에서 서버 실행됏다고 알려줌
-> 그거 누르면됨

- 참고: 해당 페이지에서 요청 들어갈때마다 콘솔창에 뜸; 지림

### 가상환경
- 프로젝트를 여러개 돌릴때에 매번 서버닫고 열고 해줘야함 (하나의 환경에서 하나의 서버만 돌릴 수 있음)
-  개귀찮음 -> 가상환경 만들어주면 여러서버 동시에 돌릴수있음.

- 어떤 폴더에다가 가상환경을 만들어주면, 이 폴더의 하위에서는 모두 새로운 환경이 되는거임.

</br>
</br>

## 가상환경에서 프로젝트 실행하기

### 1. 우선 가상환경을 만들고
### 2. 그 안에 장고 깔고
### 3. 프로젝트 시작하고
### 4. 앱만들고
### 5. 런서버

### 1. 가상환경 만드는 법
1. 가상환경을 실행하고자 하는 폴더(프로젝트 폴더)로 간다.
2. ```
    $ python -m venv venv(작명)
    ```
3. ```
    $ source ./venv/Scripts/activate
    ```
    - 그러면 콘솔에 (venv) 뜸.
    - 그러면 현재 환경이 가상환경이라는 뜻.
    - pip list 해보면 아무것도 없음. 새로운 환경임
    - 다시 전부 설치해주고 프로젝트 해주면 됨.
- 참고 : 탭써서 자동완성 하기
    - sc + tab -> scripts
    - sc로 시작하는게 scripts 하나뿐이므로 바로 뜸
    - activate의 경우는 ac로 시작하는게 여러개 있음.
    - 탭 두번 누르면 ac로 시작하는거 목록 볼 수 있음.

4. 가상환경 끄고싶을때는
   ```
   $ deactivate
   ```

- 참고: 어떤 가상환경도 아닌 곳은 global환경임 (default)
- 항상 글로벌이 아닌 프로젝트 폴더 안의 가상환경을 만들고 거기에서 작업하는 습관을 갖자. 글로벌 말구.

</br>

5. 참고 : 협업할때 패키지목록을 공유하는 방법
- 패키지를 깃에 공유하면 깃이 너무 무거워짐 -> 안좋음. 오류나면 해결이 매우 어려움
- 그래서 패키지는 협업할때도 깃으로 공유 안함.
- 이때 내가 쓴 패키지를 협업자도 설치할 수 있도록 사용한 패키지 목록을 뽑아주는 기능이 있음.
1. 가상환경 패키지 목록 저장하기
    - ( 가상환경에서 설치한 패키지리스트가 담긴 텍스트 파일이 만들어짐)
```
# 가상환경에서 설치한 패키지리스트가 담긴 텍스트 파일이 만들어짐
$ pip freeze > requirements.txt
```
1. 파일로부터 패키지 한번에 설치하기(버전까지맞춰서 설치해줌)
```
$ pip install -r requirements.txt
```
6. 참고 깃허브쓸때
하위에 가상환경 만들었을때는
-> 반드시 .gitignore에 venv_test/추가 해야됨.그리고커밋해야함.
(그래야 패키지들 까지 다 안올라가는듯?)
- 그리고 requirements.txt 를 활용해서 패키지는 따로 관리
- 깃허브가 무거우면 충돌날때 관리가 매우 힘듬.


## 프로젝트와 앱
하나의 프로젝트 안의 기능단위의 여러 앱.


### 프로젝트 구조
- __init__.py -> 현재 폴더를 파이썬 패키지로 인식. 얘가 없으면 인식을 못해. 뭔오류생기면 얘 있는지 확인할것.
- asgi.py -> 비동기 과정을 도와줌. 나중에 배포할때 필요(우리과정에서 안씀)
settings.py (매우중요) -> 장고프로젝트의 설정을 관리
- settings.py안에 변수 BASE_DIR은 프로젝트 폴더를 가리키게 되어있음.
- INSTALLED APPS : 현재 프로젝트의 앱의 종류임.
urls.py -> url과 적절한 views연결 (url리스트를 적어놓는 곳인듯)
- urlpatterns [ path('admin/', admin.site.urls), ]
  -> admin경로로 요청 들어올때 뒤의로직 실행 된다~
- wsgi.py -> 서버와 연결 도와주는 역할(그런가보다)
- manage.py -> 장고프로젝트와 소통하는 유틸리티(?) (건드는거아님)
- manage.py -> 장고 프로젝트와 사용자 사이의 인터페이스 "DB에 ~를 반영해라"명령을 프로젝트에 내리고 싶다.
python manage.py ~~~~


프로젝트할때는
settings.py 랑 urls.py 두개만 보면 됨.




</br>
</br>

## 장고 템플릿 랭귀지(DTL)

- 장점 : 파이선문법이랑 매우비슷 개꿀
- 장고공식홈페이지에서 Built-in template tags and filters 검색하면 됨.
- 별별 잡다구리한 기능 다잇음


### 미들웨어에서, 변수를 만들어서 활용하기 (변수 만들고 template으로 전달)

1. 변수적고 세번째인자에 딕셔너리로 넣어주면 그만.
예) def first(request):
          name = 'J'
          return render(request, 'fristapp/first.html', { 'key' : name})

1.  html에서 {{key}}으로 불러와서 써먹을 수 있다!



- 변수를 많이 활용할때는 , 세번째인자에 덕지덕지 넣지말구 변수하나 담아서 깔끔하게 처리

예)
```
def first(request):
    name = '우히히'
    job = '멋진학생'
    menus = ['햄버거', '제목', '치킨']

    context= {
        'name':name,
        'job':job,
        'menus': menus,
    }

    return render(request, 'firstapp/first.html' , context)
```

- 참고: html에서 파이썬로직쓰기 ->
```
{% 로직 %}
 어저고저쩌고
{% endfor %}
```
- 짜잘한거: {{ llist1 | length }} -> 하면 배열이랑, 배열길이 나옴..
  - -> 공식문서에서 찾아서 사용